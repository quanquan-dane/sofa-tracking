/**
 * sofa-tracking - v0.9.2 - Wed May 06 2015 18:26:32 GMT+0200 (CEST)
 * http://www.sofa.io
 *
 * Copyright (c) 2014 CouchCommerce GmbH (http://www.couchcommerce.com / http://www.sofa.io) and other contributors
 * THIS SOFTWARE CONTAINS COMPONENTS OF THE SOFA.IO COUCHCOMMERCE SDK (WWW.SOFA.IO)
 * IT IS PROVIDED UNDER THE LICENSE TERMS OF THE ATTACHED LICENSE.TXT.
 */
!function(n,e){"use strict";n.define("sofa.tracking.BingTracker",function(n){var e={};return e.setup=function(){},e.trackEvent=function(){},e.trackTransaction=function(e){var t="//flex.msn.com/mstag/tag/"+n.siteId+"/analytics.html?dedup="+(n.dedup||"1")+"&domainId="+n.domainId+"&type="+(n.type||"1")+"&revenue="+e.totals.subtotal+"&actionid="+n.actionId,a=new Image(1,1);a.src=t},e}),n.define("sofa.tracking.GoogleAdwordsConversionTracker",function(){var n={};return n.trackConversion=function(n){window.google_conversion_id=n.id,window.google_conversion_language=n.lang,window.google_conversion_format=n.format,window.google_conversion_color=n.color,window.google_conversion_label=n.label,window.google_conversion_value=n.value,window.google_conversion_currency=n.currency,window.google_remarketing_only=n.remarketing;var t=e.write;e.write=function(n){e.body.appendChild(n)},function(){var n=e.createElement("script");n.src="//www.googleadservices.com/pagead/conversion.js",n.async=!0,n.onload=function(){setTimeout(function(){e.write=t},100)},e.body.appendChild(n)}()},n}),n.define("sofa.tracking.GoogleAnalyticsTracker",function(n){var t={};return t.setup=function(){var a=t._gaq=window._gaq=window._gaq||[];a.push(["_setAccount",n.accountNumber]),a.push(["_setDomainName",n.domainName]),a.push(["_setAllowLinker",!0]);var o=e.createElement("script");o.type="text/javascript",o.async=!0,o.src=("https:"===e.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var r=e.getElementsByTagName("script")[0];r.parentNode.insertBefore(o,r)},t.trackEvent=function(n){n.category=n.category||"",n.action=n.action||"",n.label=n.label||"",n.value=n.value||"";var e=[];"pageView"===n.category?(e.push("_trackPageview"),e.push(n.label)):(e.push("_trackEvent"),e.push(n.category),e.push(n.action),e.push(n.label),n.value&&e.push(n.value)),_gaq.push(e)},t.trackTransaction=function(e){if(n.conversionId){var t="http://www.googleadservices.com/pagead/conversion/"+n.conversionId+"/?value="+e.totals.subtotal+"&label="+n.conversionLabel+"&guid=ON&script=0",a=new Image(1,1);a.src=t}_gaq.push(["_gat._anonymizeIp"]),_gaq.push(["_addTrans",e.token,location.host,e.totals.subtotal,e.totals.vat,e.totals.shipping,"","",e.billing.countryname]),e.items.forEach(function(n){_gaq.push(["_addItem",e.token,n.productId,n.name,"",n.price,n.qty])}),_gaq.push(["_trackTrans"])},t}),n.define("sofa.tracking.GoogleAnalyticsUniversalTracker",function(t){var a={};return a.setup=function(){var n="ga-disable-"+t.accountNumber;e.cookie.indexOf(n+"=true")>-1&&(window[n]=!0),function(n,e,t,a,o,r,c){n.GoogleAnalyticsObject=o,n[o]=n[o]||function(){(n[o].q=n[o].q||[]).push(arguments)},n[o].l=1*new Date,r=e.createElement(t),c=e.getElementsByTagName(t)[0],r.async=1,r.src=a,c.parentNode.insertBefore(r,c)}(window,e,"script","//www.google-analytics.com/analytics.js","ga"),ga("create",t.accountNumber,"auto"),ga("require","linkid","linkid.js"),ga("require","displayfeatures"),ga("require","ec")},a.trackEvent=function(n){ga("set","anonymizeIp",!0),n.category=n.category||"",n.action=n.action||"",n.label=n.label||"",n.value=n.value||"","pageView"===n.category?ga("send","pageview",n.label):ga("send",{hitType:"event",eventCategory:n.category,eventAction:n.action,eventLabel:n.label,eventValue:n.value})},a.trackTransaction=function(n){n.items.forEach(function(n){ga("ec:addProduct",a.decorators.transaction.addProduct(n))}),ga("ec:setAction","purchase",a.decorators.transaction.purchase(n)),ga("send","pageview",{anonymizeIp:!0})},a.decorators={transaction:{addProduct:function(n){return{id:n.sku,name:n.name,category:null,brand:null,variant:null,price:n.price,quantity:n.qty}},purchase:function(n){return{id:n.token,affiliation:null,revenue:n.totals.grandtotal,tax:n.totals.vat,shipping:n.totals.shipping,coupon:null}}}},t.decorators&&n.Util.extend(a.decorators,t.decorators),a}),n.define("sofa.tracking.TrackingService",function(){var e={},t=e.__trackers=[];return n.observable.mixin(e),e.addTracker=function(n){n.setup&&"function"==typeof n.setup&&n.setup(),t.push(n)},e.trackEvent=function(n){e.emit("trackEvent",e,n),t.forEach(function(e){e.trackEvent&&"function"==typeof e.trackEvent&&e.trackEvent(n)})},e.trackTransaction=function(n){e.emit("trackTransaction",e,n),t.forEach(function(e){e.trackTransaction&&"function"==typeof e.trackTransaction&&e.trackTransaction(n)})},e.trackConversion=function(n){e.emit("trackConversion",e,n),t.forEach(function(e){e.trackConversion&&"function"==typeof e.trackConversion&&e.trackConversion(n)})},e})}(sofa,document);