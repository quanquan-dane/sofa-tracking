/**
 * sofa-tracking - v0.9.4 - Mon May 11 2015 13:47:36 GMT+0200 (CEST)
 * http://www.sofa.io
 *
 * Copyright (c) 2014 CouchCommerce GmbH (http://www.couchcommerce.com / http://www.sofa.io) and other contributors
 * THIS SOFTWARE CONTAINS COMPONENTS OF THE SOFA.IO COUCHCOMMERCE SDK (WWW.SOFA.IO)
 * IT IS PROVIDED UNDER THE LICENSE TERMS OF THE ATTACHED LICENSE.TXT.
 */
!function(e,n,a){"use strict";e.define("sofa.tracking.BingTracker",function(e){var n={};return n.setup=function(){},n.trackEvent=function(){},n.trackTransaction=function(n){var a="//flex.msn.com/mstag/tag/"+e.siteId+"/analytics.html?dedup="+(e.dedup||"1")+"&domainId="+e.domainId+"&type="+(e.type||"1")+"&revenue="+n.totals.subtotal+"&actionid="+e.actionId,t=new Image(1,1);t.src=a},n}),e.define("sofa.tracking.GoogleAdwordsConversionTracker",function(){var e={};return e.setup=function(){!function(){var e=n.createElement("script");e.src="//www.googleadservices.com/pagead/conversion_async.js",e.async=!0,n.body.appendChild(e)}()},e.trackConversion=function(e){window.google_trackConversion({google_conversion_id:e.id,google_conversion_language:e.lang,google_conversion_format:e.format,google_conversion_color:e.color,google_conversion_label:e.label,google_conversion_value:e.value,google_conversion_currency:e.currency,google_remarketing_only:e.remarketing})},e}),e.define("sofa.tracking.GoogleAnalyticsTracker",function(e){var a={};return a.setup=function(){var t=a._gaq=window._gaq=window._gaq||[];t.push(["_setAccount",e.accountNumber]),t.push(["_setDomainName",e.domainName]),t.push(["_setAllowLinker",!0]);var o=n.createElement("script");o.type="text/javascript",o.async=!0,o.src=("https:"===n.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var r=n.getElementsByTagName("script")[0];r.parentNode.insertBefore(o,r)},a.trackEvent=function(e){e.category=e.category||"",e.action=e.action||"",e.label=e.label||"",e.value=e.value||"";var n=[];"pageView"===e.category?(n.push("_trackPageview"),n.push(e.label)):(n.push("_trackEvent"),n.push(e.category),n.push(e.action),n.push(e.label),e.value&&n.push(e.value)),_gaq.push(n)},a.trackTransaction=function(n){if(e.conversionId){var a="http://www.googleadservices.com/pagead/conversion/"+e.conversionId+"/?value="+n.totals.subtotal+"&label="+e.conversionLabel+"&guid=ON&script=0",t=new Image(1,1);t.src=a}_gaq.push(["_gat._anonymizeIp"]),_gaq.push(["_addTrans",n.token,location.host,n.totals.subtotal,n.totals.vat,n.totals.shipping,"","",n.billing.countryname]),n.items.forEach(function(e){_gaq.push(["_addItem",n.token,e.productId,e.name,"",e.price,e.qty])}),_gaq.push(["_trackTrans"])},a}),e.define("sofa.tracking.GoogleAnalyticsUniversalTracker",function(a){var t={};return t.setup=function(){var e="ga-disable-"+a.accountNumber;n.cookie.indexOf(e+"=true")>-1&&(window[e]=!0),function(e,n,a,t,o,r,c){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,r=n.createElement(a),c=n.getElementsByTagName(a)[0],r.async=1,r.src=t,c.parentNode.insertBefore(r,c)}(window,n,"script","//www.google-analytics.com/analytics.js","ga"),ga("create",a.accountNumber,"auto"),ga("require","linkid","linkid.js"),ga("require","displayfeatures"),ga("require","ec")},t.trackEvent=function(e){ga("set","anonymizeIp",!0),e.category=e.category||"",e.action=e.action||"",e.label=e.label||"",e.value=e.value||"","pageView"===e.category?ga("send","pageview",e.label):ga("send",{hitType:"event",eventCategory:e.category,eventAction:e.action,eventLabel:e.label,eventValue:e.value})},t.trackTransaction=function(e){e.items.forEach(function(e){ga("ec:addProduct",t.decorators.transaction.addProduct(e))}),ga("ec:setAction","purchase",t.decorators.transaction.purchase(e)),ga("send","pageview",{anonymizeIp:!0})},t.decorators={transaction:{addProduct:function(e){return{id:e.sku,name:e.name,category:null,brand:null,variant:null,price:e.price,quantity:e.qty}},purchase:function(e){return{id:e.token,affiliation:null,revenue:e.totals.grandtotal,tax:e.totals.vat,shipping:e.totals.shipping,coupon:null}}}},a.decorators&&e.Util.extend(t.decorators,a.decorators),t}),e.define("sofa.tracking.TrackingService",function(){var n={},a=n.__trackers=[];return e.observable.mixin(n),n.addTracker=function(e){e.setup&&"function"==typeof e.setup&&e.setup(),a.push(e)},n.trackEvent=function(e){n.emit("trackEvent",n,e),a.forEach(function(n){n.trackEvent&&"function"==typeof n.trackEvent&&n.trackEvent(e)})},n.trackTransaction=function(e){n.emit("trackTransaction",n,e),a.forEach(function(n){n.trackTransaction&&"function"==typeof n.trackTransaction&&n.trackTransaction(e)})},n.trackConversion=function(e){n.emit("trackConversion",n,e),a.forEach(function(n){n.trackConversion&&"function"==typeof n.trackConversion&&n.trackConversion(e)})},n})}(sofa,document);